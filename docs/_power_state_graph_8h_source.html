<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Disaggregate: /mnt/sshfs/imperialroot/homes/dk3810/workingcopies/disaggregate/src/PowerStateGraph.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Disaggregate</div>
   <div id="projectbrief">Disaggregate Smart Meter data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_power_state_graph_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>PowerStateGraph.h</h1>  </div>
</div>
<div class="contents">
<a href="_power_state_graph_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * PowerStateGraph.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *  Created on: 3 Aug 2011</span>
<a name="l00005"></a>00005 <span class="comment"> *      Author: jack</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef POWERSTATEGRAPH_H_</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define POWERSTATEGRAPH_H_</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;boost/graph/adjacency_list.hpp&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;ostream&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="_statistic_8h.html">Statistic.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="_common_8h.html">Common.h</a>&quot;</span>    <span class="comment">// for Sample_t</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="_signature_8h.html">Signature.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="_aggregate_data_8h.html">AggregateData.h</a>&quot;</span>
<a name="l00020"></a>00020 
<a name="l00026"></a><a class="code" href="class_power_state_graph.html">00026</a> <span class="keyword">class </span><a class="code" href="class_power_state_graph.html" title="This class does most of the work behind the &amp;quot;graphs and spikes&amp;quot; disaggregation approach...">PowerStateGraph</a> {
<a name="l00027"></a>00027 <span class="keyword">private</span>:
<a name="l00032"></a><a class="code" href="struct_power_state_graph_1_1_time_and_power.html">00032</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_time_and_power.html" title="A simple struct for pairing timestamp and meanPower. Used in Fingerprint struct.">TimeAndPower</a> {
<a name="l00033"></a><a class="code" href="struct_power_state_graph_1_1_time_and_power.html#a954d89f3cb7ea2995212ed2cf77b66c4">00033</a>         <span class="keywordtype">size_t</span> <a class="code" href="struct_power_state_graph_1_1_time_and_power.html#a954d89f3cb7ea2995212ed2cf77b66c4">timestamp</a>;
<a name="l00034"></a><a class="code" href="struct_power_state_graph_1_1_time_and_power.html#ad72a43e2102871ca1240f3e828f1e94d">00034</a>         <span class="keywordtype">double</span> <a class="code" href="struct_power_state_graph_1_1_time_and_power.html#ad72a43e2102871ca1240f3e828f1e94d">meanPower</a>;
<a name="l00035"></a><a class="code" href="struct_power_state_graph_1_1_time_and_power.html#a4811faf077994c6a84a8e4100393fd94">00035</a>         <a class="code" href="struct_power_state_graph_1_1_time_and_power.html#a4811faf077994c6a84a8e4100393fd94">TimeAndPower</a>( <span class="keyword">const</span> <span class="keywordtype">size_t</span> _timestamp, <span class="keyword">const</span> <span class="keywordtype">double</span> _meanPower )
<a name="l00036"></a>00036         : <a class="code" href="struct_power_state_graph_1_1_time_and_power.html#a954d89f3cb7ea2995212ed2cf77b66c4">timestamp</a>(_timestamp), <a class="code" href="struct_power_state_graph_1_1_time_and_power.html#ad72a43e2102871ca1240f3e828f1e94d">meanPower</a>(_meanPower)
<a name="l00037"></a>00037         {}
<a name="l00038"></a>00038     };
<a name="l00039"></a>00039 <span class="keyword">public</span>:
<a name="l00040"></a>00040     <a class="code" href="class_power_state_graph.html#a855e4ee7838d432e1b0a0916d3fc825d">PowerStateGraph</a>();
<a name="l00041"></a>00041 
<a name="l00042"></a>00042     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a90ebffe4864640182b342a814af0f0a7" title="Update or initialise Power State Graph.">update</a>(
<a name="l00043"></a>00043             <span class="keyword">const</span> <a class="code" href="class_signature.html" title="Class for storing a Device&amp;#39;s signature recorded by, for example, a Watts Up plug-in power logger...">Signature</a>&amp; sig,
<a name="l00044"></a>00044             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00045"></a>00045             );
<a name="l00046"></a>00046 
<a name="l00047"></a>00047     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a52095959446302223b8c436e1aa49e50" title="Information about an entire device &amp;#39;fingerprint&amp;#39; found in the aggregate data.">writeGraphViz</a>(std::ostream&amp; out);
<a name="l00048"></a>00048 
<a name="l00052"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html">00052</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_fingerprint.html">Fingerprint</a> {
<a name="l00053"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a438d9afe470f8865bf23685e0f0dbeda">00053</a>         <span class="keywordtype">size_t</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a438d9afe470f8865bf23685e0f0dbeda" title="UNIX timestamp for start time.">timestamp</a>; 
<a name="l00054"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ab573e3a2e9143f0139782072f8938ecb">00054</a>         <span class="keywordtype">size_t</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ab573e3a2e9143f0139782072f8938ecb" title="Duration (in seconds)">duration</a>;  
<a name="l00055"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a76d36700804fc3557e73729b03faadfb">00055</a>         <span class="keywordtype">double</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a76d36700804fc3557e73729b03faadfb" title="energy consumed (Joules)">energy</a>;    
<a name="l00056"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ac3d6a362a66f0406a4716e4a07405e23">00056</a>         <span class="keywordtype">double</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ac3d6a362a66f0406a4716e4a07405e23" title="Average likelihood.">avLikelihood</a>; 
<a name="l00057"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#aacb278eafcf7236a8487196b50c835aa">00057</a>         std::list&lt; TimeAndPower &gt; <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#aacb278eafcf7236a8487196b50c835aa">timeAndPower</a>;
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ad57ecc5c45a3e7d9d22bfb84a425ec0b">00059</a>         <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ad57ecc5c45a3e7d9d22bfb84a425ec0b">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html">Fingerprint</a>&amp; ddi) {
<a name="l00060"></a>00060 
<a name="l00061"></a>00061             o &lt;&lt; <span class="stringliteral">&quot;  timestamp      = &quot;</span> &lt;&lt; ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a438d9afe470f8865bf23685e0f0dbeda" title="UNIX timestamp for start time.">timestamp</a> &lt;&lt; std::endl
<a name="l00062"></a>00062               &lt;&lt; <span class="stringliteral">&quot;  date           = &quot;</span> &lt;&lt; ctime( (time_t*)(&amp;ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a438d9afe470f8865bf23685e0f0dbeda" title="UNIX timestamp for start time.">timestamp</a>) )
<a name="l00063"></a>00063               &lt;&lt; <span class="stringliteral">&quot;  av likelihood  = &quot;</span> &lt;&lt; ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ac3d6a362a66f0406a4716e4a07405e23" title="Average likelihood.">avLikelihood</a> &lt;&lt; std::endl
<a name="l00064"></a>00064               &lt;&lt; <span class="stringliteral">&quot;  duration       = &quot;</span> &lt;&lt; ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ab573e3a2e9143f0139782072f8938ecb" title="Duration (in seconds)">duration</a> &lt;&lt; <span class="stringliteral">&quot; seconds&quot;</span>
<a name="l00065"></a>00065               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="namespace_utils.html#ad66c6623876ef260ee9f2ca1593854d8">Utils::secondsToTime</a>(ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#ab573e3a2e9143f0139782072f8938ecb" title="Duration (in seconds)">duration</a>) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl
<a name="l00066"></a>00066               &lt;&lt; <span class="stringliteral">&quot;  energy         = &quot;</span> &lt;&lt; ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a76d36700804fc3557e73729b03faadfb" title="energy consumed (Joules)">energy</a> &lt;&lt; <span class="stringliteral">&quot; Joules&quot;</span>
<a name="l00067"></a>00067               &lt;&lt; <span class="stringliteral">&quot; equivalent to &quot;</span> &lt;&lt; ddi.<a class="code" href="struct_power_state_graph_1_1_fingerprint.html#a76d36700804fc3557e73729b03faadfb" title="energy consumed (Joules)">energy</a> / <a class="code" href="_common_8h.html#a8b5d4090c9b2d51d2cc9d73f481cb893" title="Joules per kWh.">J_PER_KWH</a> &lt;&lt; <span class="stringliteral">&quot; kWh&quot;</span>;
<a name="l00068"></a>00068             <span class="keywordflow">return</span> o;
<a name="l00069"></a>00069         }
<a name="l00070"></a>00070     };
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="keyword">const</span> std::list&lt;Fingerprint&gt; <a class="code" href="class_power_state_graph.html#a3823f720987e5e13eb7f1cfae7cdf4be" title="This is the main public interface to the disaggregation algorithm.">disaggregate</a>(
<a name="l00073"></a>00073             <span class="keyword">const</span> <a class="code" href="class_aggregate_data.html" title="This class is responsible for storing and searching aggregated data, such as the data produced by the...">AggregateData</a>&amp; aggregateData,
<a name="l00074"></a>00074             <span class="keyword">const</span> <span class="keywordtype">bool</span> keep_overlapping = <span class="keyword">false</span>,
<a name="l00075"></a>00075             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00076"></a>00076             );
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#ad077e00b7ecda2cdf2acb79201cbd6aa">setDeviceName</a>(<span class="keyword">const</span> std::string&amp; _deviceName);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt; double &gt;</a>&amp; <a class="code" href="class_power_state_graph.html#a1aff2c646dc8187249534520f8f7a4a1">getEnergyConsumption</a>() <span class="keyword">const</span>;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="class_power_state_graph.html#a8c2cd09d96e09cba0e51a0bf5b1fdc57">operator&lt;&lt;</a>( std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="class_power_state_graph.html" title="This class does most of the work behind the &amp;quot;graphs and spikes&amp;quot; disaggregation approach...">PowerStateGraph</a>&amp; psg );
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="keyword">private</span>:
<a name="l00085"></a>00085     <span class="comment">/***********************************</span>
<a name="l00086"></a>00086 <span class="comment">     * P.S.G. GRAPH USED FOR TRAINING: *</span>
<a name="l00087"></a>00087 <span class="comment">     * (PSG = Power State Graph)       *</span>
<a name="l00088"></a>00088 <span class="comment">     ***********************************/</span>
<a name="l00089"></a>00089     <span class="keyword">struct </span>PowerStateEdge; <span class="comment">// forward declared to fix interdependency introduced by edgeHistory</span>
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html">00091</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html">PowerStateVertex</a> {
<a name="l00094"></a>00094          <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a> <a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html#aa1130f2a6a84ede9a90b19bd1315e040" title="Stats for 8 samples immediately after the spike. Used for determining vertices during training...">postSpike</a>;
<a name="l00095"></a>00095 
<a name="l00098"></a><a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html#af84bddbf90a05cf2d6415ce22b19e9c2">00098</a>          <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a> <a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html#af84bddbf90a05cf2d6415ce22b19e9c2">betweenSpikes</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100          <span class="comment">/* (Sample_t is simply a typedef for a double.)   */</span>
<a name="l00101"></a>00101     };
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00110"></a>00110     <span class="keyword">typedef</span> boost::adjacency_list&lt;
<a name="l00111"></a>00111             boost::vecS, boost::vecS, <span class="comment">// vecS allows multiple edges between vertices</span>
<a name="l00112"></a>00112             boost::directedS, <span class="comment">// we need directional edges</span>
<a name="l00113"></a>00113             <a class="code" href="struct_power_state_graph_1_1_power_state_vertex.html">PowerStateVertex</a>, <span class="comment">// our custom vertex (node) type</span>
<a name="l00114"></a>00114             <a class="code" href="struct_power_state_graph_1_1_power_state_edge.html">PowerStateEdge</a>    <span class="comment">// our custom edge type</span>
<a name="l00115"></a><a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875">00115</a>             &gt; <a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a>;
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html">00117</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html">PowerStateEdge</a> {
<a name="l00118"></a><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a836fb8fcc81e3a1f9513a0f7079a0ebf">00118</a>         <a class="code" href="struct_statistic.html">Statistic&lt;double&gt;</a> <a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a836fb8fcc81e3a1f9513a0f7079a0ebf">delta</a>;
<a name="l00119"></a><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a7c1f13510581d9a999edeb5aadf34c96">00119</a>         <a class="code" href="struct_statistic.html">Statistic&lt;size_t&gt;</a> <a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a7c1f13510581d9a999edeb5aadf34c96">duration</a>;
<a name="l00120"></a><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a77650430de56b01038cb2daa41663ecc">00120</a>         <span class="keywordtype">size_t</span> <a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#a77650430de56b01038cb2daa41663ecc" title="The number of times this edge has been traversed during training. Used with totalCount to determine w...">count</a>; 
<a name="l00124"></a><a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#add3377c9d2b6e0b5ea50046a69047847">00124</a>         std::list&lt; PSGraph::edge_descriptor &gt; <a class="code" href="struct_power_state_graph_1_1_power_state_edge.html#add3377c9d2b6e0b5ea50046a69047847" title="a &amp;quot;rolling&amp;quot; list storing the previous few edges we&amp;#39;ve seen. This serves exactly the sam...">edgeHistory</a>; 
<a name="l00130"></a>00130     };
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 
<a name="l00133"></a><a class="code" href="class_power_state_graph.html#ae58789f7684b1f3c2d2dfee295e7e686">00133</a>     <span class="keyword">typedef</span> boost::graph_traits&lt;PSGraph&gt;::vertex_iterator <a class="code" href="class_power_state_graph.html#ae58789f7684b1f3c2d2dfee295e7e686">PSG_vertex_iter</a>;
<a name="l00134"></a><a class="code" href="class_power_state_graph.html#a0f298813bf4b423a07de76ee5d6edf4f">00134</a>     <span class="keyword">typedef</span> boost::graph_traits&lt;PSGraph&gt;::edge_iterator <a class="code" href="class_power_state_graph.html#a0f298813bf4b423a07de76ee5d6edf4f">PSG_edge_iter</a>;
<a name="l00135"></a><a class="code" href="class_power_state_graph.html#a0076074a11b3c6de4ceeb6bb24714656">00135</a>     <span class="keyword">typedef</span> boost::graph_traits&lt;PSGraph&gt;::out_edge_iterator <a class="code" href="class_power_state_graph.html#a0076074a11b3c6de4ceeb6bb24714656">PSG_out_edge_iter</a>;
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="class_power_state_graph.html#a9086743593caa95a9bdcc5246ac729a2">00137</a>     <span class="keyword">typedef</span> boost::property_map&lt;PSGraph, boost::vertex_index_t&gt;::type <a class="code" href="class_power_state_graph.html#a9086743593caa95a9bdcc5246ac729a2">PSG_vertex_index_map</a>;
<a name="l00138"></a><a class="code" href="class_power_state_graph.html#a757ecee3fa068e0cd56eb20877f055d7">00138</a>     <span class="keyword">typedef</span> boost::property_map&lt;PSGraph, boost::edge_index_t &gt;::type <a class="code" href="class_power_state_graph.html#a757ecee3fa068e0cd56eb20877f055d7">PSG_edge_index_map</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html">00140</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html">PSG_vertex_writer</a> {
<a name="l00141"></a>00141 
<a name="l00142"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#a2c355a3c1d33d2c6741d1aa868fc9363">00142</a>             <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#a2c355a3c1d33d2c6741d1aa868fc9363">PSG_vertex_writer</a>(<a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a>&amp; g_) : <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a> (g_) {};
<a name="l00143"></a>00143 
<a name="l00144"></a>00144             <span class="keyword">template</span> &lt;<span class="keyword">class</span> Vertex&gt;
<a name="l00145"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#a13149c2d326f8d7279253fc54e7edb21">00145</a>             <span class="keywordtype">void</span> <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#a13149c2d326f8d7279253fc54e7edb21">operator()</a>(std::ostream&amp; out, Vertex v) {
<a name="l00146"></a>00146                     out &lt;&lt; <span class="stringliteral">&quot; [label=\&quot;&quot;</span>
<a name="l00147"></a>00147                         <span class="stringliteral">&quot;vertex &quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot; \\n\\n&quot;</span>
<a name="l00148"></a>00148                         &lt;&lt; <span class="stringliteral">&quot;min=&quot;</span>  &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].betweenSpikes.min &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].postSpike.min &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00149"></a>00149                         &lt;&lt; <span class="stringliteral">&quot;mean=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].betweenSpikes.mean &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].postSpike.mean  &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00150"></a>00150                         &lt;&lt; <span class="stringliteral">&quot;max=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].betweenSpikes.max &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].postSpike.max  &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00151"></a>00151                         &lt;&lt; <span class="stringliteral">&quot;stdev=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].betweenSpikes.stdev &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>[v].postSpike.stdev  &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00152"></a>00152                         &lt;&lt; <span class="stringliteral">&quot;\&quot;]&quot;</span>;
<a name="l00153"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">00153</a>             };
<a name="l00154"></a>00154 
<a name="l00155"></a>00155             <a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a> <a class="code" href="struct_power_state_graph_1_1_p_s_g__vertex__writer.html#ad50ea0d7bd136709cad13054e7679e66">g</a>;
<a name="l00156"></a>00156     };
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html">00158</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html">PSG_edge_writer</a> {
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a3cb9805a4264daab3acd98aa3b7c6572">00160</a>             <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a3cb9805a4264daab3acd98aa3b7c6572">PSG_edge_writer</a>(<a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a>&amp; g_) : <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a> (g_) {};
<a name="l00161"></a>00161 
<a name="l00162"></a>00162             <span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge&gt;
<a name="l00163"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a84a6042ec3c1259282ad8866a9e2c1a4">00163</a>             <span class="keywordtype">void</span> <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a84a6042ec3c1259282ad8866a9e2c1a4">operator()</a>(std::ostream&amp; out, Edge e) {
<a name="l00164"></a>00164                     out &lt;&lt; <span class="stringliteral">&quot; [label=\&quot;&quot;</span>
<a name="l00165"></a>00165                         &lt;&lt; <span class="stringliteral">&quot;dMean=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].delta.mean &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00166"></a>00166                         &lt;&lt; <span class="stringliteral">&quot; dSD=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].delta.stdev &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00167"></a>00167                         &lt;&lt; <span class="stringliteral">&quot; dMin=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].delta.min &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00168"></a>00168                         &lt;&lt; <span class="stringliteral">&quot; dMax=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].delta.max &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00169"></a>00169                         &lt;&lt; <span class="stringliteral">&quot; durMean=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].duration.mean &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00170"></a>00170                         &lt;&lt; <span class="stringliteral">&quot; durSD=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].duration.stdev &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00171"></a>00171                         &lt;&lt; <span class="stringliteral">&quot; durMin=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].duration.min &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span>
<a name="l00172"></a>00172                         &lt;&lt; <span class="stringliteral">&quot; durMax=&quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].duration.max &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span> ;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174                     <span class="keywordflow">for</span> (std::list&lt; PSGraph::edge_descriptor &gt;::const_iterator
<a name="l00175"></a>00175                             edge=<a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].<a class="code" href="class_power_state_graph.html#abccc8f7ea8259b53926bd149b309686f" title="a &amp;quot;rolling&amp;quot; list storing the previous few edges we&amp;#39;ve seen.">edgeHistory</a>.begin();
<a name="l00176"></a>00176                             edge != <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>[e].edgeHistory.end(); edge++) {
<a name="l00177"></a>00177                         out &lt;&lt; <span class="stringliteral">&quot; \\n&quot;</span> &lt;&lt; *edge;
<a name="l00178"></a>00178                     }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180                     out &lt;&lt; <span class="stringliteral">&quot;\&quot;]&quot;</span>;
<a name="l00181"></a><a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">00181</a>             };
<a name="l00182"></a>00182 
<a name="l00183"></a>00183             <a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a> <a class="code" href="struct_power_state_graph_1_1_p_s_g__edge__writer.html#a07aba8a510895f3d81f912e2a77417bb">g</a>;
<a name="l00184"></a>00184     };
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="comment">/**********************************</span>
<a name="l00188"></a>00188 <span class="comment">     * GRAPH USED FOR DISAGGREGATION: *</span>
<a name="l00189"></a>00189 <span class="comment">     **********************************/</span>
<a name="l00190"></a>00190 
<a name="l00194"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html">00194</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html" title="A vertex for the directed acylic graphs used by getStartTimes()">DisagVertex</a> {
<a name="l00195"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a51beb22108c361180230fadb69c8045c">00195</a>         <span class="keywordtype">size_t</span> <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a51beb22108c361180230fadb69c8045c" title="UNIX timestamp taken from AggregateData.">timestamp</a>; 
<a name="l00196"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a4abc3f50ccbf86fdd5fbe79cb14f3a76">00196</a>         <span class="keywordtype">double</span> <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a4abc3f50ccbf86fdd5fbe79cb14f3a76" title="Mean power used between this and the previous vertex.">meanPower</a>; 
<a name="l00197"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a67988eea22868192817c8ab1ca03c8c5">00197</a>         PSGraph::vertex_descriptor <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a67988eea22868192817c8ab1ca03c8c5" title="link to vertex in Power State Graph.">psgVertex</a>; 
<a name="l00198"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a1879464d431e1fa3f4caa401f4f59d56">00198</a>         PSGraph::edge_descriptor <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a1879464d431e1fa3f4caa401f4f59d56" title="the PSG edge which got us to where we are.">psgEdge</a>; 
<a name="l00199"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a6dca31ddabac58b62009f2ebf57c07df">00199</a>         std::list&lt; PSGraph::edge_descriptor &gt; <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a6dca31ddabac58b62009f2ebf57c07df" title="a &amp;quot;rolling&amp;quot; list storing the previous few edges we&amp;#39;ve seen.">edgeHistory</a>; 
<a name="l00203"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a05bdabdb134b010904ff94211bdcccce">00203</a>         <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a05bdabdb134b010904ff94211bdcccce">DisagVertex</a>()
<a name="l00204"></a>00204         : <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a51beb22108c361180230fadb69c8045c" title="UNIX timestamp taken from AggregateData.">timestamp</a>(0), <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a4abc3f50ccbf86fdd5fbe79cb14f3a76" title="Mean power used between this and the previous vertex.">meanPower</a>(0), <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a67988eea22868192817c8ab1ca03c8c5" title="link to vertex in Power State Graph.">psgVertex</a>(0)
<a name="l00205"></a>00205         {}
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a4f4a48627a6c63c466afef70fc5ccd70">00207</a>         <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a05bdabdb134b010904ff94211bdcccce">DisagVertex</a>(
<a name="l00208"></a>00208                 <span class="keyword">const</span> <span class="keywordtype">size_t</span> _timestamp,
<a name="l00209"></a>00209                 <span class="keyword">const</span> <span class="keywordtype">double</span> _meanPower,
<a name="l00210"></a>00210                 <span class="keyword">const</span> PSGraph::vertex_descriptor _psgVertex,
<a name="l00211"></a>00211                 <span class="keyword">const</span> PSGraph::edge_descriptor _psgEdge
<a name="l00212"></a>00212                 )
<a name="l00213"></a>00213         : <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a51beb22108c361180230fadb69c8045c" title="UNIX timestamp taken from AggregateData.">timestamp</a>(_timestamp), <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a4abc3f50ccbf86fdd5fbe79cb14f3a76" title="Mean power used between this and the previous vertex.">meanPower</a>(_meanPower), <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a67988eea22868192817c8ab1ca03c8c5" title="link to vertex in Power State Graph.">psgVertex</a>(_psgVertex), <a class="code" href="struct_power_state_graph_1_1_disag_vertex.html#a1879464d431e1fa3f4caa401f4f59d56" title="the PSG edge which got us to where we are.">psgEdge</a>(_psgEdge)
<a name="l00214"></a>00214         {}
<a name="l00215"></a>00215     };
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 
<a name="l00224"></a>00224     <span class="keyword">typedef</span> boost::adjacency_list&lt;
<a name="l00225"></a>00225             boost::setS, boost::vecS, boost::bidirectionalS,
<a name="l00226"></a>00226             DisagVertex,   <span class="comment">// our custom vertex (node) type</span>
<a name="l00227"></a>00227             <span class="keywordtype">double</span>         <span class="comment">// our custom edge type (for storing likelihood)</span>
<a name="l00228"></a><a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015">00228</a>             &gt; <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>;
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="class_power_state_graph.html#a03dfe49e81e357744bef48a88d211eb3">00230</a>     <span class="keyword">typedef</span> boost::graph_traits&lt;DisagTree&gt;::out_edge_iterator <a class="code" href="class_power_state_graph.html#a03dfe49e81e357744bef48a88d211eb3">Disag_out_edge_iter</a>;
<a name="l00231"></a><a class="code" href="class_power_state_graph.html#ac2fe4a00587b3d5783e70f52b2aed422">00231</a>     <span class="keyword">typedef</span> boost::graph_traits&lt;DisagTree&gt;::edge_descriptor <a class="code" href="class_power_state_graph.html#ac2fe4a00587b3d5783e70f52b2aed422">Disag_edge_desc</a>;
<a name="l00232"></a>00232 
<a name="l00236"></a><a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html">00236</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html" title="used for write_graphviz for DisagGraph.">Disag_vertex_writer</a> {
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a5235037829d30eb838881639d5917df3">00238</a>             <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a5235037829d30eb838881639d5917df3">Disag_vertex_writer</a>(<a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>&amp; g_) : <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a56bbf68d374814058b58160a50248590">g</a> (g_) {};
<a name="l00239"></a>00239 
<a name="l00240"></a>00240             <span class="keyword">template</span> &lt;<span class="keyword">class</span> Vertex&gt;
<a name="l00241"></a><a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a41ecd65b89e3550eee84324c08c7aca1">00241</a>             <span class="keywordtype">void</span> <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a41ecd65b89e3550eee84324c08c7aca1">operator()</a>(std::ostream&amp; out, Vertex e) {
<a name="l00242"></a>00242                     out &lt;&lt; <span class="stringliteral">&quot; [label=\&quot;&quot;</span>
<a name="l00243"></a>00243                         &lt;&lt; <span class="stringliteral">&quot;$t = &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a56bbf68d374814058b58160a50248590">g</a>[e].timestamp &lt;&lt; <span class="stringliteral">&quot;$, &quot;</span>
<a name="l00244"></a>00244                         &lt;&lt; <span class="stringliteral">&quot;$p = &quot;</span> &lt;&lt; <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a56bbf68d374814058b58160a50248590">g</a>[e].meanPower &lt;&lt; <span class="stringliteral">&quot;$ &quot;</span>
<a name="l00245"></a>00245                         &lt;&lt; <span class="stringliteral">&quot;\&quot;]&quot;</span>;
<a name="l00246"></a><a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a56bbf68d374814058b58160a50248590">00246</a>             };
<a name="l00247"></a>00247 
<a name="l00248"></a>00248             <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a> <a class="code" href="struct_power_state_graph_1_1_disag__vertex__writer.html#a56bbf68d374814058b58160a50248590">g</a>;
<a name="l00249"></a>00249     };
<a name="l00250"></a>00250 
<a name="l00254"></a><a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html">00254</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html" title="used for write_graphviz for DisagGraph.">Disag_edge_writer</a> {
<a name="l00255"></a>00255 
<a name="l00256"></a><a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#a47b7ca978a0c6ba7d18ac4be6331566d">00256</a>             <a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#a47b7ca978a0c6ba7d18ac4be6331566d">Disag_edge_writer</a>(<a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>&amp; g_) : <a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ab6c3de5c20f2e0f2d883d611e60fbba6">g</a> (g_) {};
<a name="l00257"></a>00257 
<a name="l00258"></a>00258             <span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge&gt;
<a name="l00259"></a><a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ae0c3df1d7f11845e14a05f795a168887">00259</a>             <span class="keywordtype">void</span> <a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ae0c3df1d7f11845e14a05f795a168887">operator()</a>(std::ostream&amp; out, Edge e) {
<a name="l00260"></a>00260                 out.precision(0);
<a name="l00261"></a>00261                 out.setf( std::ios::fixed );
<a name="l00262"></a>00262                 out &lt;&lt; <span class="stringliteral">&quot; [label=\&quot;&quot;</span>
<a name="l00263"></a>00263                         &lt;&lt;  <a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ab6c3de5c20f2e0f2d883d611e60fbba6">g</a>[e]*100
<a name="l00264"></a>00264                         &lt;&lt; <span class="stringliteral">&quot;\\%\&quot;, lblstyle=\&quot;fill=black!10,inner sep=1pt,align=center,anchor=west\&quot;]&quot;</span>;
<a name="l00265"></a><a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ab6c3de5c20f2e0f2d883d611e60fbba6">00265</a>             };
<a name="l00266"></a>00266 
<a name="l00267"></a>00267             <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a> <a class="code" href="struct_power_state_graph_1_1_disag__edge__writer.html#ab6c3de5c20f2e0f2d883d611e60fbba6">g</a>;
<a name="l00268"></a>00268     };
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     <span class="comment">/****************************</span>
<a name="l00274"></a>00274 <span class="comment">     * PRIVATE MEMBER VARIABLES *</span>
<a name="l00275"></a>00275 <span class="comment">     ****************************/</span>
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="class_power_state_graph.html#a668ed95d7ae27ad400c80d5c691e10e8">00277</a>     <a class="code" href="class_power_state_graph.html#a507c685655824fa89111ab1723beb875" title="A graph where each vertex(node) is a Statistic&amp;lt;Sample_t&amp;gt; and each edge is a PowerStateEdge ...">PSGraph</a> <a class="code" href="class_power_state_graph.html#a668ed95d7ae27ad400c80d5c691e10e8" title="store the power state graph learnt during training.">powerStateGraph</a>; 
<a name="l00279"></a><a class="code" href="class_power_state_graph.html#a0ce0845fa70aa3ec29aee1f0c78de54e">00279</a>     PSGraph::vertex_descriptor <a class="code" href="class_power_state_graph.html#a0ce0845fa70aa3ec29aee1f0c78de54e">offVertex</a>; 
<a name="l00281"></a><a class="code" href="class_power_state_graph.html#a2488f22b81a37936243ff1e3493c6c9b">00281</a>     <span class="keywordtype">size_t</span> <a class="code" href="class_power_state_graph.html#a2488f22b81a37936243ff1e3493c6c9b" title="the total number of times any edge has been traversed during training.">totalCount</a>; 
<a name="l00285"></a><a class="code" href="class_power_state_graph.html#a72bfd26474a03ee600df77aada105c75">00285</a>     <a class="code" href="class_aggregate_data.html" title="This class is responsible for storing and searching aggregated data, such as the data produced by the...">AggregateData</a> <span class="keyword">const</span> * <a class="code" href="class_power_state_graph.html#a72bfd26474a03ee600df77aada105c75">aggData</a>;
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="class_power_state_graph.html#aba24b63b53d87e8a1d6cc5667a1c7254">00287</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_power_state_graph.html#aba24b63b53d87e8a1d6cc5667a1c7254" title="Set to 0 to disable.">EDGE_HISTORY_SIZE</a> = 5; 
<a name="l00288"></a><a class="code" href="class_power_state_graph.html#abccc8f7ea8259b53926bd149b309686f">00288</a>     std::list&lt; PSGraph::edge_descriptor &gt; <a class="code" href="class_power_state_graph.html#abccc8f7ea8259b53926bd149b309686f" title="a &amp;quot;rolling&amp;quot; list storing the previous few edges we&amp;#39;ve seen.">edgeHistory</a>; 
<a name="l00291"></a><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html">00291</a>     <span class="keyword">struct </span><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html">LikelihoodAndVertex</a> {
<a name="l00292"></a><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a6a49a4a69d2b7b78e09d43f16330d91b">00292</a>         <span class="keywordtype">double</span> <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a6a49a4a69d2b7b78e09d43f16330d91b">likelihood</a>;
<a name="l00293"></a><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a67f186afad836da5d9c6647a581974be">00293</a>         DisagTree::vertex_descriptor <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a67f186afad836da5d9c6647a581974be">vertex</a>;
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a35566abeb6280283c03d915f56119d02">00295</a>         <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a35566abeb6280283c03d915f56119d02">LikelihoodAndVertex</a>()
<a name="l00296"></a>00296         : <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a6a49a4a69d2b7b78e09d43f16330d91b">likelihood</a>(0), <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a67f186afad836da5d9c6647a581974be">vertex</a>(0)
<a name="l00297"></a>00297         {}
<a name="l00298"></a>00298 
<a name="l00299"></a><a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#abfb7a299c2167e73ab5a9c69218f1d8b">00299</a>         <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a35566abeb6280283c03d915f56119d02">LikelihoodAndVertex</a>(<span class="keyword">const</span> DisagTree::vertex_descriptor&amp; _vertex)
<a name="l00300"></a>00300         : <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a6a49a4a69d2b7b78e09d43f16330d91b">likelihood</a>(0), <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html#a67f186afad836da5d9c6647a581974be">vertex</a>(_vertex)
<a name="l00301"></a>00301         {}
<a name="l00302"></a>00302     };
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="class_power_state_graph.html#a00d8120f4d6c65ba065181df5580e350">00304</a>     std::list&lt; std::list&lt;LikelihoodAndVertex&gt; &gt; <a class="code" href="class_power_state_graph.html#a00d8120f4d6c65ba065181df5580e350">listOfPaths</a>;
<a name="l00305"></a>00305 
<a name="l00306"></a><a class="code" href="class_power_state_graph.html#acd3ccedf90895a1c82e4b6c5b4e53300">00306</a>     <a class="code" href="struct_statistic.html">Statistic&lt; double &gt;</a> <a class="code" href="class_power_state_graph.html#acd3ccedf90895a1c82e4b6c5b4e53300" title="Energy consumption in Joules obtained from training signatures.">energyConsumption</a>; 
<a name="l00309"></a><a class="code" href="class_power_state_graph.html#ad4518479232495953b076fce87e13201">00309</a>     std::string <a class="code" href="class_power_state_graph.html#ad4518479232495953b076fce87e13201" title="All PowerStateGraphs are associated with a single device.">deviceName</a>; 
<a name="l00311"></a>00311     <span class="comment">/****************************</span>
<a name="l00312"></a>00312 <span class="comment">     * PRIVATE MEMBER FUNCTIONS *</span>
<a name="l00313"></a>00313 <span class="comment">     ****************************/</span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     PSGraph::vertex_descriptor <a class="code" href="class_power_state_graph.html#ac36cccb3fb0281f9b68e39ba28737770" title="Attempts to find an existing vertex which is statistically similar to stat. If an existing similar ve...">updateOrInsertVertex</a>(
<a name="l00316"></a>00316             <span class="keyword">const</span> <a class="code" href="class_signature.html" title="Class for storing a Device&amp;#39;s signature recorded by, for example, a Watts Up plug-in power logger...">Signature</a>&amp; sig,
<a name="l00317"></a>00317             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; postSpikePowerState,
<a name="l00318"></a>00318             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; betweenSpikesPowerState,
<a name="l00319"></a>00319             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00320"></a>00320         );
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     PSGraph::vertex_descriptor <a class="code" href="class_power_state_graph.html#a7420e492ce4608c1a4dbba027af116c0" title="Find the vertex statistically most similarto stat.">mostSimilarVertex</a>(
<a name="l00323"></a>00323             <span class="keywordtype">bool</span> * success,
<a name="l00324"></a>00324             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; stat,
<a name="l00325"></a>00325             <span class="keyword">const</span> <span class="keywordtype">double</span> ALPHA = 0.0000005
<a name="l00326"></a>00326         ) <span class="keyword">const</span>;
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="class_power_state_graph.html#a84bbbefd53f67b2945ac17eb11e28fdf" title="Decides whether or not to reject this spike based on the before and after statistics.">rejectSpike</a>(
<a name="l00329"></a>00329             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; before,
<a name="l00330"></a>00330             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; after,
<a name="l00331"></a>00331             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00332"></a>00332             ) <span class="keyword">const</span>;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a6ca3bd89b0334bdaa87c703366ffce11" title="Useful for diagnostics.">printSpikeInfo</a>(
<a name="l00335"></a>00335             <span class="keyword">const</span> std::list&lt;Signature::Spike&gt;::iterator spike,
<a name="l00336"></a>00336             <span class="keyword">const</span> <span class="keywordtype">size_t</span> start,
<a name="l00337"></a>00337             <span class="keyword">const</span> <span class="keywordtype">size_t</span> end,
<a name="l00338"></a>00338             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; before,
<a name="l00339"></a>00339             <span class="keyword">const</span> <a class="code" href="struct_statistic.html">Statistic&lt;Sample_t&gt;</a>&amp; after,
<a name="l00340"></a>00340             <span class="keyword">const</span> <a class="code" href="class_signature.html" title="Class for storing a Device&amp;#39;s signature recorded by, for example, a Watts Up plug-in power logger...">Signature</a>&amp; sig
<a name="l00341"></a>00341             ) <span class="keyword">const</span>;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a0e3e05ae1b952132621425c042d84ec1" title="Update or Insert a new edge into powerStateGraph.">updateOrInsertEdge</a>(
<a name="l00344"></a>00344             <span class="keyword">const</span> PSGraph::vertex_descriptor&amp; beforeVertex,
<a name="l00345"></a>00345             <span class="keyword">const</span> PSGraph::vertex_descriptor&amp; afterVertex,
<a name="l00346"></a>00346             <span class="keyword">const</span> <span class="keywordtype">size_t</span> samplesSinceLastSpike,
<a name="l00347"></a>00347             <span class="keyword">const</span> <span class="keywordtype">double</span> spikeDelta,
<a name="l00348"></a>00348             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00349"></a>00349             );
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a26384a0a6d9867d336814b70b7a22cd3" title="Update (or create) directional edges between power states (vertices) so the edges are consistent with...">updateEdges</a>( <span class="keyword">const</span> <a class="code" href="class_signature.html" title="Class for storing a Device&amp;#39;s signature recorded by, for example, a Watts Up plug-in power logger...">Signature</a>&amp; sig );
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="keyword">const</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html">Fingerprint</a> <a class="code" href="class_power_state_graph.html#a0478f171d51d21613746640c7415fb0b">initTraceToEnd</a>(
<a name="l00354"></a>00354             <span class="keyword">const</span> <a class="code" href="struct_aggregate_data_1_1_found_spike.html" title="A simple struct for representing delta spikes found by findSpike()">AggregateData::FoundSpike</a>&amp; spike,
<a name="l00355"></a>00355             <span class="keyword">const</span> <span class="keywordtype">size_t</span> deviceStart,
<a name="l00356"></a>00356             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span> <span class="comment">// set true to see graphviz output of trees</span>
<a name="l00357"></a>00357             );
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a0df76ca216d2d48aeb44d2bb08046e2f">traceToEnd</a>(
<a name="l00360"></a>00360             <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a> * disagTree,
<a name="l00361"></a>00361             <span class="keyword">const</span> DisagTree::vertex_descriptor&amp; vertex,
<a name="l00362"></a>00362             <span class="keyword">const</span> <span class="keywordtype">size_t</span> prevTimestamp,
<a name="l00363"></a>00363             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00364"></a>00364             ) <span class="keyword">const</span>;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#ae3eaaaca0f80786469b8674991db9476">addItemToEdgeHistory</a>(
<a name="l00367"></a>00367             <span class="keyword">const</span> PSGraph::edge_descriptor&amp; edge
<a name="l00368"></a>00368             );
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="class_power_state_graph.html#a6de44e31afe85bf0ee18dc09a7be329c" title="Check if edge list a and edge list b are equal.">edgeListsAreEqual</a>(
<a name="l00371"></a>00371             <span class="keyword">const</span> std::list&lt; PSGraph::edge_descriptor &gt;&amp; a,
<a name="l00372"></a>00372             <span class="keyword">const</span> std::list&lt; PSGraph::edge_descriptor &gt;&amp; b,
<a name="l00373"></a>00373             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00374"></a>00374             ) <span class="keyword">const</span>;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     std::list&lt; PSGraph::edge_descriptor &gt; <a class="code" href="class_power_state_graph.html#a02f0ffcb7632abbf717ea43e79469193" title="Trace the disagTree backwards.">getEdgeHistoryForVertex</a>(
<a name="l00377"></a>00377             <span class="keyword">const</span> <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>&amp; disagTree,
<a name="l00378"></a>00378             <span class="keyword">const</span> DisagTree::vertex_descriptor&amp; startVertex
<a name="l00379"></a>00379             ) <span class="keyword">const</span>;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a492bc7278329e94573559ec0cfdd2c7b" title="Trace the tree downwards from vertex recursively finding every path which successfully completes (i...">findListOfPathsThroughDisagTree</a>(
<a name="l00382"></a>00382             <span class="keyword">const</span> <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>&amp; disagTree,
<a name="l00383"></a>00383             <span class="keyword">const</span> DisagTree::vertex_descriptor vertex,
<a name="l00384"></a>00384             <span class="keyword">const</span> <a class="code" href="struct_power_state_graph_1_1_likelihood_and_vertex.html">LikelihoodAndVertex</a> lav,
<a name="l00385"></a>00385             std::list&lt;LikelihoodAndVertex&gt; path = std::list&lt;LikelihoodAndVertex&gt;(0)
<a name="l00386"></a>00386             );
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     <span class="keyword">const</span> <a class="code" href="struct_power_state_graph_1_1_fingerprint.html">Fingerprint</a> <a class="code" href="class_power_state_graph.html#a222bc37f6c90142887eb36b4e31ab568" title="Iterates through each path in listOfPaths to find the one with the highest likelihood.">findBestPath</a>(
<a name="l00389"></a>00389             <span class="keyword">const</span> <a class="code" href="class_power_state_graph.html#a2be617d73dc54598aacb7b7a2970c015" title="Tree structure used to keep track of all the possible solutions during disaggregation.">DisagTree</a>&amp; disagTree,
<a name="l00390"></a>00390             <span class="keyword">const</span> <span class="keywordtype">size_t</span> deviceStart,
<a name="l00391"></a>00391             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00392"></a>00392             );
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a5ef8ee81761b13f9f16b564aca228994">removeOverlapping</a>(
<a name="l00395"></a>00395             std::list&lt;Fingerprint&gt; * disagList, 
<a name="l00396"></a>00396             <span class="keyword">const</span> <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>
<a name="l00397"></a>00397             );
<a name="l00398"></a>00398 
<a name="l00399"></a>00399     <span class="keywordtype">void</span> <a class="code" href="class_power_state_graph.html#a8c7b40b543c04d5f5b498a537093ae46">displayAndPlotFingerprintList</a>(
<a name="l00400"></a>00400             <span class="keyword">const</span> std::list&lt; Fingerprint &gt;&amp; fingerprintList,
<a name="l00401"></a>00401             <span class="keyword">const</span> std::string&amp; aggDataFilename
<a name="l00402"></a>00402             ) <span class="keyword">const</span>;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_power_state_graph.html#aae4db4000f6485559f06ab4de4d54619" title="Determine the index of the next spike after spike.">indexOfNextSpike</a>(
<a name="l00405"></a>00405             <span class="keyword">const</span> std::list&lt;Signature::Spike&gt;&amp; spikes,
<a name="l00406"></a>00406             std::list&lt;Signature::Spike&gt;::iterator spike,
<a name="l00407"></a>00407             <span class="keyword">const</span> <a class="code" href="class_signature.html" title="Class for storing a Device&amp;#39;s signature recorded by, for example, a Watts Up plug-in power logger...">Signature</a>&amp; sig
<a name="l00408"></a>00408             ) <span class="keyword">const</span>;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 };
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="preprocessor">#endif </span><span class="comment">/* POWERSTATEGRAPH_H_ */</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_power_state_graph_8h.html">PowerStateGraph.h</a>      </li>
      <li class="footer">Generated on Fri Sep 9 2011 17:06:35 for Disaggregate by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
